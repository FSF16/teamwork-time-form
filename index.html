<!DOCTYPE html>
<html>
<head>
  <title>Log Time - Test</title>
</head>
<body>
  <h2>Log Time for Teamwork Project (Test)</h2>
  <form id="timeForm">
    <input type="hidden" id="project" name="project" value="">
    
    <label for="date">Date:</label>
    <input type="date" id="date" name="date" required><br><br>
    
    <label for="hours">Hours to log:</label>
    <input type="number" id="hours" name="hours" min="0.1" step="0.1" required><br><br>
    
    <button type="submit">Submit</button>
  </form>

  <script>
    // Get project ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const projectId = urlParams.get('project');
    document.getElementById('project').value = projectId;

    document.getElementById('timeForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const project = document.getElementById('project').value;
      const date = document.getElementById('date').value;
      const hours = parseFloat(document.getElementById('hours').value);

      // Calculate start and end times
      const endTime = new Date();
      const startTime = new Date(endTime.getTime() - hours * 60 * 60 * 1000);

      const payload = {
        project,
        date,
        hours,
        startTime: startTime.toISOString(),
        endTime: endTime.toISOString()
      };

      // Test: show payload instead of sending
      console.log(payload);
      alert(JSON.stringify(payload, null, 2));
    });
  </script>
</body>
</html>
